/* styles.css — Science Notes
   House style: British English prose; American English in code comments.
*/

/* =========================
   Design tokens
   ========================= */
   :root {
    --bg: #0b0c10;
    --surface: #0f1117;
    --card: #121520;
    --text: #e8ecf8;
    --subtle: #9aa3b2;
    --border: #1e2636;
    --brand: #6ea8fe;
    --accent: #7de2d1;
    --warn: #ffd166;
    --danger: #ff6b6b;
    --radius: 16px;
    --shadow: 0 10px 24px rgba(0,0,0,.35), 0 1px 0 rgba(255,255,255,.04) inset;
    --font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans JP, "Helvetica Neue", Arial;
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  }
  @media (prefers-color-scheme: light) {
    :root {
      --bg: #f6f7fb; --surface: #ffffff; --card: #ffffff; --text: #1b2235; --subtle: #5b6578; --border: #e7ecf4;
      --shadow: 0 10px 24px rgba(0,0,0,.08);
    }
  }
  
  /* Base */
  *, *::before, *::after { box-sizing: border-box; }
  html, body { height: 100%; }
  body { margin: 0; font-family: var(--font-sans); background: var(--bg); color: var(--text); line-height: 1.6; }
  /* Accessible link look */
  a { color: #9ac1ff; text-decoration: none; }
  a:hover { text-decoration: underline; }
  
  /* Header */
  header.site { position: sticky; top: 0; z-index: 10; background: color-mix(in oklab, var(--surface) 92%, transparent); border-bottom: 1px solid var(--border); backdrop-filter: blur(6px); }
  .shell { max-width: 1100px; margin: 0 auto; padding: 20px; }
  .row { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 16px; }
  .brand { display: flex; align-items: center; gap: 12px; font-weight: 800; letter-spacing: .2px; }
  .brand-badge { width: 34px; height: 34px; border-radius: 10px; background: linear-gradient(135deg, var(--brand), var(--accent)); box-shadow: var(--shadow); }
  nav a { margin-left: 16px; font-weight: 600; }
  
  /* Layout */
  main { padding-top: 10px; }
  .grid { display: grid; grid-template-columns: 2.2fr 1fr; gap: 22px; align-items: start; }
  @media (max-width: 980px) { .grid { grid-template-columns: 1fr; } }
  
  /* Cards */
  .card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); overflow: clip; }
  .card .hd { padding: 16px 18px; border-bottom: 1px solid var(--border); display:flex; align-items:center; justify-content: space-between; }
  .card .bd { padding: 18px; }
  
  /* Tag/Group chips */
  .tags { display:flex; flex-wrap: wrap; gap: 8px; }
  .tag { --c: #334155; color: var(--text); font-size: 12px; padding: 6px 10px; border: 1px solid var(--border); border-radius: 999px; background: color-mix(in oklab, var(--card) 88%, transparent); }
  .tag[data-g="math"]   { --c: #2563eb; }
  .tag[data-g="phys"]   { --c: #16a34a; }
  .tag[data-g="cs"]     { --c: #a855f7; }
  .tag[data-g="stats"]  { --c: #eab308; }
  .tag[data-g="ethics"] { --c: #ef4444; }
  .tag::before { content: "●"; font-size: 10px; margin-right: 6px; color: var(--c); }
  
  /* Article */
  article.post { display: grid; gap: 10px; }
  article.post h2 { margin: 0; font-size: clamp(20px, 2.6vw, 28px); }
  .meta { color: var(--subtle); font-size: 13px; display:flex; gap: 12px; flex-wrap: wrap; }
  .lead { color: var(--subtle); }
  
  /* Math blocks (TeX text before JS render) */
  .math { font-family: var(--font-mono); background: color-mix(in oklab, var(--card) 90%, transparent); border: 1px dashed var(--border); border-radius: 10px; padding: 10px 12px; overflow:auto; }
  .eqno { float: right; color: var(--subtle); margin-left: 8px; }
  
  /* Comment UI (static) */
  .comments { margin-top: 8px; border-top: 1px dashed var(--border); padding-top: 10px; }
  .comment { display: grid; grid-template-columns: 40px 1fr; gap: 10px; padding: 12px 0; }
  .comment + .comment { border-top: 1px dashed var(--border); }
  .avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, var(--brand), var(--accent)); display:grid; place-items:center; font-weight: 800; color: #0008; }
  .who { font-weight: 700; }
  .when { color: var(--subtle); font-size: 12px; }
  
  /* Simple form look (non-functional without JS/backend) */
  .form { display: grid; gap: 10px; background: color-mix(in oklab, var(--card) 90%, transparent); border: 1px solid var(--border); border-radius: 12px; padding: 12px; }
  .input, .textarea { width: 100%; padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border); background: var(--surface); color: var(--text); outline: none; }
  .input:focus, .textarea:focus { box-shadow: 0 0 0 6px #2a5fff33; }
  .btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 10px 14px; font-weight: 700; border-radius: 10px; border: 1px solid var(--border); background: linear-gradient(180deg, var(--brand), #4d86f7); color: #fff; cursor: not-allowed; opacity: .8; }
  .hint { font-size: 12px; color: var(--subtle); }
  
  /* Aside */
  .aside .card + .card { margin-top: 18px; }
  .list { display: grid; gap: 10px; }
  
  /* Footer */
    footer.site {
      margin-top: 28px;
      color: var(--subtle);
      font-size: 13px;
      text-align: center;
      padding: 20px 0 40px;
    }
  
  /* Print */
  @media print {
    header.site, footer.site { display:none; }
    .card { box-shadow: none; border-color: #ccc; }
    a { color: #000; text-decoration: none; }
  }
  /* Only this link should be black in the header brand */
header.site .brand a.link-black:link,
header.site .brand a.link-black:visited {
  color: #000 !important;   /* 競合対策で念のため */
}

header.site .brand a.link-black:hover,
header.site .brand a.link-black:active {
  color: #000 !important;
  text-decoration: underline;
}
